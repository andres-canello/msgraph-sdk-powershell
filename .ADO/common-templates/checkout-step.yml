parameters:
  - name: GitEmail
    type: string
    default: "GraphTooling@service.microsoft.com"
  - name: GitName
    type: string
    default: "Microsoft Graph DevX Tooling"

steps:
  - checkout: self
    clean: true
    fetchDepth: 1
    persistCredentials: true

  - task: securedevelopmentteam.vss-secure-development-tools.build-task-credscan.CredScan@2
    displayName: "Run CredScan"
    inputs:
      debugMode: false

  - task: PowerShell@2
    displayName: "Configure User"
    inputs:
      targetType: "inline"
      script: |
        Write-Host "$(GitEmail) - $(GitName)"
        git config --global user.email '$(GitEmail)'
        git config --global user.name '$(GitName)'
